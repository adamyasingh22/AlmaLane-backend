openapi: 3.0.0

info:
  title: Almalane E-commerce Backend API
  description: API documentation for the Almalane E-commerce backend project built using Node.js, Express, and MongoDB.
  version: 1.0.0

servers:
  - url: http://localhost:8080
    description: Local Development Server
  - url: https://almalane-backend.onrender.com/
  - description: Live Backend (Render Deployment)

tags:
  - name: Products
    description: Product-related operations
  - name: Cart
    description: Shopping cart operations
  - name: Favorites
    description: Favorite / wishlist operations

components:
  schemas:

    Product:
      type: object
      properties:
        _id:
          type: string
          example: "665e3c9fa893e9245b8d41d2"
        title:
          type: string
          example: "Fjallraven Backpack"
        price:
          type: number
          example: 109.95
        description:
          type: string
          example: "A durable backpack designed for everyday use."
        category:
          type: string
          example: "electronics"
        image:
          type: string
          example: "https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg"

    CartItem:
      type: object
      properties:
        _id:
          type: string
          example: "665e455fa531e911d24af91e"
        productId:
          $ref: '#/components/schemas/Product'
        quantity:
          type: number
          example: 1

    FavoriteItem:
      type: object
      properties:
        _id:
          type: string
          example: "665e455fa531e911d24bf44e"
        productId:
          $ref: '#/components/schemas/Product'

paths:

  ###############################################
  # PRODUCTS ROUTES
  ###############################################

  /products:
    get:
      tags: [Products]
      summary: Get all products
      description: Fetch all products stored in MongoDB database.
      responses:
        '200':
          description: Successfully returned all products
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'

  /products/{category}:
    get:
      tags: [Products]
      summary: Get products by category
      description: Retrieve products filtered by category.
      parameters:
        - in: path
          name: category
          required: true
          description: Category name (e.g., electronics, jewelery, mens-clothing)
          schema:
            type: string
            example: electronics
      responses:
        '200':
          description: Products in the specified category
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'

  ###############################################
  # CART ROUTES
  ###############################################

  /api/cart:
    get:
      tags: [Cart]
      summary: Get all cart items
      description: Retrieves all products added to the user's cart.
      responses:
        '200':
          description: Cart items fetched successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CartItem'

    post:
      tags: [Cart]
      summary: Add product to cart
      description: Adds a product to the cart in the database.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - productId
              properties:
                productId:
                  type: string
                  example: "665e3c9fa893e9245b8d41d2"
                quantity:
                  type: number
                  example: 1
      responses:
        '201':
          description: Product added to cart successfully
          content:
            application/json:
              schema:
                type: object
                example:
                  message: "Product added to cart"

  ###############################################
  # FAVORITES ROUTES
  ###############################################

  /api/favorites:
    get:
      tags: [Favorites]
      summary: Get all favorite products
      description: Retrieves all products saved in the user's favorites.
      responses:
        '200':
          description: Favorite items fetched successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FavoriteItem'

    post:
      tags: [Favorites]
      summary: Add product to favorites
      description: Adds a product to the wishlist/favorites.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - productId
              properties:
                productId:
                  type: string
                  example: "665e3c9fa893e9245b8d41d2"
      responses:
        '201':
          description: Product added to favorites successfully
          content:
            application/json:
              schema:
                type: object
                example:
                  message: "Product added to favorites"
